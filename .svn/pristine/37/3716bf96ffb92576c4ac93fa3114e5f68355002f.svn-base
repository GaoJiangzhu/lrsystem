<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--suppress ALL-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <link href="../new/assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="../new/css/style.css"/>
    <link href="../new/assets/css/codemirror.css" rel="stylesheet">
    <link rel="stylesheet" href="../new/css/bootstrapStyle/bootstrapStyle.css" type="text/css">
    <link rel="stylesheet" href="../ace/components/select2/dist/css/select2.css"/>
    <link rel="stylesheet" href="../new/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <link rel="stylesheet" href="../new/font/css/font-awesome.min.css"/>
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="../new/assets/css/ace-ie.min.css"/>
    <![endif]-->
    <link href="../new/Widget/icheck/icheck.css" rel="stylesheet" type="text/css"/>
    <link href="../new/Widget/webuploader/0.1.5/webuploader.css" rel="stylesheet" type="text/css"/>


    <script src="../new/js/jquery-1.9.1.min.js"></script>
    <script src="../new/assets/js/bootstrap.min.js"></script>
    <script src="../new/assets/js/typeahead-bs2.min.js"></script>
    <script src="../new/assets/layer/layer.js" type="text/javascript"></script>
    <script src="../new/assets/laydate/laydate.js" type="text/javascript"></script>
    <script src="../new/js/H-ui.js" type="text/javascript"></script>
    <script src="../ace/components/jquery-validation/dist/jquery.validate.js"></script>
    <script type="text/javascript" src="../new/Widget/zTree/js/jquery.ztree.all-3.5.min.js"></script>
    <script src="../new/js/lrtk.js" type="text/javascript"></script>
    <script type="text/javascript" src="../business/common.js"></script>
    <script type="text/javascript" src="../business/base.js"></script>
    <script src="../ace/components/select2/dist/js/select2.js"></script>
    <title>订单信息维护</title>
    <style type="text/css">
        .updatename {
            float: left;
            text-align: right
        }

        .select2-selection {
            height: 37px;
        }

        .select2-selection__rendered {
            margin-top: -1px;
        }

        .select2-selection__choice {
            line-height: 26px;
            height: 27px;
        }

        .select2-dropdown--below {
            margin-top: 17px;
        }
    </style>
</head>
<body>
<div class="margin clearfix">
    <div class="article_style">
        <div class="add_content" id="form-article-add">
            <form id="validation-form">
                <input name="id" type="hidden" id="id" class="col-xs-10 col-sm-10 " th:value="${res.id}"/>
                <ul>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2 col-sm-2"><i>*</i>题名::</label>
                        <span class="col-sm-8 " th:text="${res.title}">
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2 col-sm-2"><i>*</i>PISSN:</label>
                        <span class="col-sm-8 " th:text="${res.pissn}">
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>PISBN:</label>
                        <span class="col-sm-8 " th:text="${res.pisbn}">
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>EISSN:</label>
                        <span class="col-sm-8 " th:text="${res.eissn}">

                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>EISBN:</label>
                        <span class="col-sm-8 " th:text="${res.eisbn}">
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>载体:</label>
                        <span class="col-sm-8 ">
                            <select  id="carrier" name="carrier" class="col-xs-10 col-sm-10" data-placeholder="Click to Choose...">
                                    <option th:each="carrier:${data.carrierList}" th:value="${carrier.id}" th:text="${carrier.name}" th:selected="${res.carrier==carrier.id}"></option>
                                </select>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>学科:</label>
                        <span class="col-sm-8 ">
                            <!--<input name="subject" type="text" id="subject" class="col-xs-10 col-sm-10 " th:value="${res.subject}"/>-->
                            <select  id="subject" name="subject" class="col-xs-10" data-placeholder="Click to Choose...">
                                <option th:each="subject:${data.subjectList}" th:value="${subject.id}" th:text="${subject.name}" th:selected="${res.subject==subject.id}"></option>
                            </select>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>出版社:</label>
                        <span class="col-sm-8 ">
                            <input name="publisher" type="text" id="publisher" class="col-xs-10 col-sm-10 "
                                   th:value="${res.publisher}"/>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>国别:</label>
                        <span class="col-sm-8 ">
                            <!--<input name="country" type="text" id="country" class="col-xs-10 col-sm-10 " th:value="${res.country}"/>-->
                            <select  id="country" name="country" class="col-xs-10" data-placeholder="Click to Choose...">
                                <option th:each="country:${data.countryList}" th:value="${country.id}" th:text="${country.name}" th:selected="${res.country==country.id}"></option>
                            </select>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>出版年:</label>
                        <span class="col-sm-8 ">
                            <input name="pubYear" type="text" id="pubYear" class="col-xs-10 col-sm-10 "
                                   th:value="${res.pubYear}"/>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>创刊年:</label>
                        <span class="col-sm-8 ">
                            <input name="foundedYear" type="text" id="foundedYear" class="col-xs-10 col-sm-10 "
                                   th:value="${res.foundedYear}"/>
                        </span>
                    </li>
                    <li class="clearfix form-group Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>语种:</label>
                        <div class="col-sm-8 ">
                            <input type="hidden" name="language"/>
                            <select multiple="" id="language" class="select2" data-placeholder="请选择语种" class="col-xs-10 select2">
                                <option th:each="role:${data.languageList}" th:value="${role.id}" th:text="${role.name}"></option>
                            </select>
                        </div>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>文献类型:</label>
                        <span class="col-sm-8 ">
                            <input name="type" type="text" id="type" class="col-xs-10 col-sm-10 "
                                   th:value="${res.type}"/>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>出版模式:</label>
                        <span class="col-sm-8 ">
                            <!--<input name="pubPattern" type="text" id="pubPattern" class="col-xs-10 col-sm-10 " th:value="${res.pubPattern}"/>-->
                            <select  id="pubPattern" name="pubPattern" class="col-xs-10" data-placeholder="Click to Choose...">
                                <option th:each="pubPattern:${data.orderingModeList}" th:value="${pubPattern.id}" th:text="${pubPattern.name}" th:selected="${res.pubPattern==pubPattern.id}"></option>
                            </select>
                        </span>
                    </li>
                    <li class="clearfix Mandatory">
                        <label class="updatename col-sm-2"><i>*</i>出版状态:</label>
                        <span class="col-sm-8 ">
                            <!--<input name="pubStatus" type="text" id="pubStatus" class="col-xs-10 col-sm-10 " th:value="${res.pubStatus}"/>-->
                            <select  id="pubStatus" name="pubStatus" class="col-xs-10" data-placeholder="Click to Choose...">
                                <option th:each="pubStatus:${data.publishList}" th:value="${pubStatus.id}" th:text="${pubStatus.name}" th:selected="${res.pubStatus==pubStatus.id}"></option>
                            </select>
                        </span>
                    </li>
                </ul>
            </form>
            <div class="Button_operation" style="margin-left: 226px">
                <button onclick="res_save_submit();" class="btn btn-primary radius" type="submit"> 保存并提交
                </button>
                <a class="btn btn-default radius" href="/dataMaintain/resourcesMaintain" type="button"> &nbsp;&nbsp;取消
                    &nbsp;&nbsp;
                </a>
            </div>
        </div>
    </div>
</div>
</body>
<script th:inline="javascript">
    /*<![CDATA[*/
    function res_save_submit() {

        var str2value= $('#language').select2('data');
        var languages = "";
        if (str2value.length ==0){
            DuzUtils.notifyWarning("请选择语种");
            return;
        }else {
            for (var i = 0; i < str2value.length; i++) {
                languages += str2value[i].id;
                if (i<str2value.length-1){
                    languages += ",";
                }
            }
        }
        $("input[name='language']").val(languages);

        $.ajax({  //ajax方式向后台发送请求
            "type": "POST",
            "url": "updResourceInfo",
            "dataType": "json",
            "data": $("#validation-form").serialize(),
            success: function (data) {
                if (data.status == 0) {
                    DuzUtils.notifySuccess("操作成功");
                    setTimeout(getList, 1000)
                } else {
                    DuzUtils.notifyError("操作成功");
                }
                console.log(data)
            }
        });
    }

    function getList() {
        self.location = "/dataMaintain/resourcesMaintain";
    }

    $(document).ready(function() {
        var options = {
            allowClear:true
        };
        $(".select2").css("width","80%").select2(options);

        var language = [[${res.language}]];
        if (language != null && language != "") {
            var languages = language.split(",");
            var arr = [];
            for (var i = 0; i < languages.length; i++) {
                arr.push(languages[i]);
            }
            $(".select2").select2().val(arr).trigger("change");
        }
    });
    /*]]>*/
</script>
</html>